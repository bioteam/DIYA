<?xml version="1.0" encoding="UTF-8"?>
<!--
This Diya conf file can be used to take 454 assemblies and a *qual file as input
and output an annotated Genbank file and corresponding ASN.1 that can be submitted to 
NCBI.

Example:

nohup /usr/lib/perl5/site_perl/5.8.8/diya.pl -conf genome-annotator-for-ncbi.conf \
-set MYUNIREFD=/site/data/uniref50.fasta \
-set MYSTRAIN=test0001 -set MYSPECIES='Test test' -set MYRPSD=/site/data/Cdd -set MYSEQID=test0001 \
-set MYCLUSTERS=/site/data/Clusters.bcp -set MYCDD=/site/data/cddid_all.tbl \
-set MYQUALFILE=test-files/454LargeContigs.qual -set MYTAXID=12345 \
test-files/454LargeContigs.fna > test0001.out &

1. copy all relevant files to a working directory
2. run glimmer3
3. run blastp of predicted peptides against UniRef50 (SGE)
4. run rpsblast of predicted peptides against CDD (SGE)
5. run tRNAscanSE
6. run rnammer
7. run CTR
8. run RNAsifter
9. run phobos
10. correct of annotation text
11. create ASN and associated files for NCBI submission
-->

<conf>
  <order>
<!--
	 <names>assemble_pseudocontig make-single-fa MARC::glimmer3 extractCDS  
	        MARC::blastpCDS  MARC::rpsblastCDS MARC::tRNAscanSE MARC::rnammer 
          MARC::CTR MARC::RNAsifter MARC::phobos gbconvert</names> 
-->
   <names>assemble_pseudocontig</names> 
  </order>
    <script>
    <name>assemble_pseudocontig</name>
    <executable>diya-assemble_pseudocontig.pl</executable>
    <command>-bin /usr/local/bin -infile INPUTFILE -species MYSPECIES -strain MYSTRAIN -seqid MYSEQID -outdir OUTPUTDIR</command>
    <home>/usr/local/share/apps/DIYA/scripts</home>
    <inputfrom></inputfrom>
    <inputformat></inputformat>
  </script>
  <script>
    <name>make-single-fa</name>
    <executable>make-single-fa.pl</executable>
    <command>MYSEQID.gbk OUTPUTDIR</command>
    <home>/usr/local/share/DIYA/scripts</home>
    <inputfrom></inputfrom>
    <inputformat></inputformat>
  </script>
  <parser> 
    <name>MARC::glimmer3</name>
    <executable>g3-from-scratch.diya.csh</executable>
    <command>MYSEQID.fa MYSEQID</command>
    <home>/usr/local/share/apps/glimmer3.02/scripts</home>
    <inputfrom></inputfrom>
    <inputformat></inputformat>
  </parser>
  <script>
    <name>extractCDS</name>
    <executable>extractCDS.pl</executable>
    <command>INPUTFILE OUTPUTFILE</command>
    <home>/usr/local/share/DIYA/scripts</home>
    <inputfrom>MARC::glimmer3</inputfrom>
    <inputformat></inputformat>
  </script>
  <parser>
    <name>MARC::blastpCDS</name>
    <executable>blastall</executable>
<!-- <command>-p blastx -d MYUNIREFD -i INPUTFILE -o OUTPUTFILE -e .001 -v 1 -b 1</command> -->
	 <command>-i INPUTFILE -p blastx -d MYUNIREFD -o OUTPUTFILE -e .001 -v 1 -b 1</command>
    <home>/usr/local/bin/</home>
    <inputformat></inputformat>
    <inputfrom>extractCDS</inputfrom>
  </parser>
  <parser>
    <name>MARC::rpsblastCDS</name>
    <executable>rpsblast</executable>
<!-- <command>-d MYRPSD -i INPUTFILE -o OUTPUTFILE -e .001 -I T -p F -v 1 -b 1</command> -->
    <command>-d MYRPSD -i INPUTFILE -o OUTPUTFILE -e .001 -I T -p F -v 1 -b 1</command>
    <home>/usr/local/bin/</home>
    <inputformat></inputformat>
    <inputfrom>extractCDS</inputfrom>
  </parser>
  <parser>
    <name>MARC::tRNAscanSE</name>
    <executable>tRNAscan-SE</executable>
    <command>-B -o OUTPUTFILE MYSEQID.fa</command>
    <home>/usr/local/bin</home>
    <inputformat></inputformat>
    <inputfrom></inputfrom>
  </parser>
  <parser>
    <name>MARC::rnammer</name>
    <executable>rnammer</executable>
    <command>-S bac --gff OUTPUTFILE MYSEQID.fa</command>
    <home>/usr/local/bin</home>
    <inputformat></inputformat>
    <inputfrom></inputfrom>
  </parser>
  <parser>
    <name>MARC::CTR</name>
    <executable></executable>
    <command></command>
    <home></home>
    <inputformat></inputformat>
    <inputfrom></inputfrom>
  </parser>
  <parser>
    <name>MARC::RNAsifter</name>
    <executable>RNAsifter</executable>
    <command></command>
    <home></home>
    <inputformat></inputformat>
    <inputfrom></inputfrom>
  </parser>
  <parser>
    <name>MARC::phobos</name>
    <executable>phobos</executable>
    <command></command>
    <home></home>
    <inputformat></inputformat>
    <inputfrom></inputfrom>
  </parser>
  <script>
    <name>gbconvert</name>
    <executable>gbconvert.pl</executable>
    <command>-agp -q MYQUALFILE -t MYTAXID INPUTFILE.gbk</command>
    <home>/usr/local/share/DIYA/scripts</home>
    <inputformat></inputformat>
    <inputfrom>MARC::rnammer</inputfrom>
  </script>
  <run>
    <mode>serial</mode>
  </run>
</conf>
